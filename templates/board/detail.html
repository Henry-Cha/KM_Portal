{% extends 'main.html' %} 
{% block content %}
<!--{{post.update_counter}}-->

<div class="card">
    <!--제목,분류,작성일-->
    <div class="card-header">
        <strong>{{ post.title }}</strong>
        <span>{{ post.date|date:'Y.m.d. H:i' }}</span>
    </div>
    <div class="card-body">
        <!--작성자, 조회수-->
        <div>
            <span>작성자 : {{ post.user }}</span>
            <span>조회수 : {{ post.hits }}</span>
        </div>
        <!--내용-->
        <div>
            {{ post.content }}
        </div>
    </div>
</div>
<!--수정, 삭제 -->
<div>
    {% if post_auth %}
     <button class="btn btn-sm" onclick="location.href='/board/{{url}}/edit/{{ post.id }}'">수정</button>
    <a href="/board/{{url}}/delete/{{post.id}}" role="button">삭제</a>
    <!-- <button class="btn btn-sm" data-toggle="modal" data-target="#delete_modal">삭제</button> -->
    {% endif %}
</div>
<div>
    <a href="/board/{{url}}" role="button">목록</a> <!-- 수정 : href /board >> /board/{{url}} -->
</div>
<!--댓글-->
<div class="card">
    <div class="card-header">
        <div class="col-md-12">
            <form action="/board/{{url}}/answer/create/{{post.id}}/" method="POST">
            {% csrf_token %}
                {% if user.is_authenticated %}
            <div class="form-group row">
                <textarea class="form-control" id="content" name="content" rows="3" placeholder="댓글을 입력해주세요." minlength='0' maxlength="400"></textarea>
            </div>
            <div class="text-right" style="float:right">
                    <input type="submit" value="답글등록">
            </div>
                {% else %}
                        <div class="form-group row">
                            <textarea class="form-control" id="content" name="content" rows="3" placeholder="로그인 후 사용이 가능합니다."></textarea>
                        </div>
                {% endif %}
            </form>
        </div>
        <hr>
        <div id="more_comment">
            {% if lst %}
                {% for answer in lst %}
                <div id='{{ answer.id }}'>
                        <strong>{{ answer.user }}</strong>
                        <span style="float:right">{{ answer.date }}</span>
                        {% if answer.user == request.user %}
                        <div>
                            <div style="white-space:pre-wrap; text-align:left;">{{ answer.content }}</div>
                            <div style="text-align: right;">
                                <a href="/board/{{url}}/answer/delete/{{post.id}}/{{answer.id}}" role="button" >댓글삭제</a>
                            </div>
                        </div>
                        <hr>
                        {% else %}
                        <div>
                            <div style="white-space:pre-wrap; text-align:left;">{{ answer.content }}</div>
                        </div>
                        <hr>
                        {% endif %}
                </div>
                <div class='{{ answer.id }}'></div>
                {% endfor %}
            {% endif %}
            <input type="hidden" id="comment_writer" value={{request.user}}>
            <div id="comment_list"></div>
        </div>
    </div>
</div>

<!-- <div id="delete_modal" class="modal fade" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">삭제경고</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <p>게시글을 삭제하시겠습니까?</p>
            </div>
            <div class="modal-footer">
                <button onclick="delete_modal()" type="button" class="btn btn-dark">삭제하기</button>
                <button type="button" class="btn btn-light" data-dismiss="modal">취소하기</button>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript">
    function delete_modal() {
        location.replace('/board/delete/{{post.id}}');
    }
</script> -->

{% endblock %}